---
import Layout from "../layouts/Layout.astro";
import Footer from "../components/Footer.astro";
import ContributionCard from "../components/ContributionCard.astro";
import CircleCycle from "../components/CircleCycle.astro";
import GitHubActivity from "../components/GitHubActivity.astro";
import Newsletter from "../components/Newsletter.astro";
import mangoMan from "../assets/CIB Mango Tree_mango_man.gif";
import { Calendar, Slack, Heart } from "@lucide/astro";

const contributionTypesTop = [
  {
    title: "Development",
    icon: "code",
    description:
      "Help build new detection tools, improve existing algorithms, or enhance our CLI interface. We work with Python, data analysis, and NLP/ML.",
    color: "green" as const,
  },
  {
    title: "Design",
    icon: "palette",
    description:
      "Create intuitive interfaces, visualizations, and educational materials. UI/UX design, data visualization, and graphic design skills welcome.",
    color: "yellow" as const,
  },
  {
    title: "Research & Writing",
    icon: "file-text",
    description:
      "Document our tools, write case studies, and contribute to our knowledge base. Technical writing, research analysis, and content creation.",
    color: "cyan" as const,
  },
];

const contributionTypesBottom = [
  {
    title: "Testing & Feedback",
    icon: "flask",
    description:
      "Try our tools, report bugs, and help us improve the user experience. User testing, bug reporting, and feature suggestions.",
    color: "lavender" as const,
  },
  {
    title: "Engagement & Marketing",
    icon: "megaphone",
    description:
      "Help spread the word about CIB Mango Tree. Social media, community outreach, partnerships, and event coordination.",
    color: "peach" as const,
  },
];

const contributionSteps = [
  {
    title: "Bug Reports",
    icon: "bug",
    description:
      "Found something broken? Open a GitHub issue with details about what went wrong. Even small bugs help us improve!",
    ctaText: "Report a Bug",
    ctaLink: "https://github.com/civictechdc/cib-mango-tree/issues/new",
  },
  {
    title: "Code Contributions",
    icon: "code",
    description:
      'Ready to code? Fork the repo, make your changes, and submit a pull request. Check issues labeled "good first issue" to get started.',
    ctaText: "View Good First Issues",
    ctaLink:
      "https://github.com/civictechdc/cib-mango-tree/issues?q=is%3Aissue+is%3Aopen+label%3A%22good+first+issue%22",
  },
  {
    title: "Ideas & Suggestions",
    icon: "lightbulb",
    description:
      "Have an idea for a new feature? Join our Slack channel #cib-mango-tree or open a GitHub discussion to share your thoughts.",
    ctaText: "Join Slack",
    ctaLink: "https://codefordc.slack.com",
  },
  {
    title: "Documentation",
    icon: "book",
    description:
      "Help make our tools more accessible by improving documentation. No coding required—just clear writing!",
    ctaText: "View Docs",
    ctaLink: "/docs",
  },
];
---

<Layout>
  <!-- Hero Section -->
  <section class="py-20 md:py-24 px-8 md:px-12 bg-background">
    <div class="max-w-5xl mx-auto">
      <!-- Heading with Mango Man icon -->
      <div class="flex items-center gap-4 mb-10">
        <h1 class="font-bold text-4xl md:text-5xl lg:text-6xl leading-tight">
          Get Involved
        </h1>
        <img
          src={mangoMan.src}
          alt="Dancing mango character"
          class="w-16 md:w-20 lg:w-24 h-auto"
        />
      </div>

      <!-- Two-column paragraphs -->
      <div class="grid grid-cols-1 md:grid-cols-2 gap-8 md:gap-12">
        <p class="text-lg text-muted leading-relaxed">
          As a fully volunteer team, we welcome everyone to drive whichever part
          of the project sparks their interest—or to collaborate with a team
          already growing a piece of the Mango Tree.
        </p>

        <p class="text-lg text-muted leading-relaxed">
          Whether you're a developer, designer, researcher, or simply passionate
          about digital democracy, your contributions help combat online
          disinformation and build a healthier information ecosystem.
        </p>
      </div>
    </div>
  </section>

  <!-- Ways to Contribute -->
  <section class="py-20 md:py-24 px-8 md:px-12 bg-[#F8F6F2]">
    <div class="max-w-5xl mx-auto">
      <h2 class="font-bold text-3xl mb-12">Ways to Contribute</h2>

      <!-- Top row: 3 cards -->
      <div class="grid grid-cols-1 md:grid-cols-3 gap-8 mb-8">
        {
          contributionTypesTop.map((type, index) => (
            <div
              style={`animation-delay: ${index * 0.1}s;`}
              class="animate-fade-in-up opacity-0"
            >
              <ContributionCard
                title={type.title}
                icon={type.icon}
                description={type.description}
                color={type.color}
              />
            </div>
          ))
        }
      </div>

      <!-- Bottom row: 2 cards centered -->
      <div class="flex justify-center gap-8">
        {
          contributionTypesBottom.map((type, index) => (
            <div
              style={`animation-delay: ${(index + 3) * 0.1}s;`}
              class="animate-fade-in-up opacity-0 w-full md:w-[calc(33.333%-1rem)]"
            >
              <ContributionCard
                title={type.title}
                icon={type.icon}
                description={type.description}
                color={type.color}
              />
            </div>
          ))
        }
      </div>
    </div>
  </section>

  <!-- How We Work Together -->
  <section class="py-20 md:py-24 px-8 md:px-12 bg-background">
    <div class="max-w-5xl mx-auto">
      <h2 class="font-bold text-3xl mb-6 text-center">How We Work Together</h2>
      <p class="text-muted text-center max-w-2xl mx-auto mb-12">
        Our team follows an agile process that keeps everyone aligned and moving
        forward
      </p>

      <CircleCycle />
    </div>
  </section>

  <!-- Making a Contribution -->
  <section class="py-20 md:py-24 px-8 md:px-12 bg-[#F8F6F2]">
    <div class="max-w-5xl mx-auto">
      <h2 class="font-bold text-3xl mb-6">Making a Contribution</h2>
      <p class="text-muted mb-12 max-w-3xl">
        Interested in adding to the codebase or reporting an issue? We use
        GitHub to manage contributions. Here's how to get started:
      </p>

      <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mb-8">
        {
          contributionSteps.map((step, index) => (
            <div
              style={`animation-delay: ${index * 0.1}s;`}
              class="animate-fade-in-up opacity-0"
            >
              <ContributionCard
                title={step.title}
                icon={step.icon}
                description={step.description}
                ctaText={step.ctaText}
                ctaLink={step.ctaLink}
              />
            </div>
          ))
        }
      </div>
    </div>
  </section>

  <!-- GitHub Activity Widget -->
  <section class="py-20 md:py-24 px-8 md:px-12 bg-background">
    <div class="max-w-5xl mx-auto">
      <h2 class="font-bold text-3xl mb-12">Open Source Development</h2>
      <GitHubActivity />
    </div>
  </section>

  <!-- Join Civic Tech DC -->
  <section class="py-20 md:py-24 px-8 md:px-12 bg-mango-green-dark text-white">
    <div class="max-w-5xl mx-auto">
      <h2 class="font-bold text-3xl mb-8">Join Civic Tech DC</h2>
      <p class="text-lg text-white/90 mb-6 leading-relaxed max-w-3xl">
        CIB Mango Tree is a project within the Civic Tech DC community. Civic
        Tech DC is a 501(c)(3) non-profit that organizes biweekly "project
        night" meetups where technologists meet to plan and carry out
        software-based projects that solve civic problems.
      </p>
      <p class="text-lg text-white/90 mb-10 leading-relaxed max-w-3xl">
        Just as the CIB Mango Tree project is open to any contributor of all
        backgrounds and skill sets, anyone can attend the Civic Tech DC project
        nights and contribute to various projects in capacities ranging from
        project management, UI design to software development.
      </p>

      <div class="flex flex-wrap gap-5">
        <a
          href="https://lu.ma/civic-tech-dc"
          target="_blank"
          rel="noopener noreferrer"
          class="cta-btn inline-flex items-center gap-2 bg-mango-yellow px-6 py-3 font-semibold"
        >
          <Calendar class="w-5 h-5" />
          RSVP on Lu.ma
        </a>
        <a
          href="https://codefordc.slack.com"
          target="_blank"
          rel="noopener noreferrer"
          class="cta-btn inline-flex items-center gap-2 bg-white/10 text-white px-6 py-3 font-semibold border border-white/30"
        >
          <Slack class="w-5 h-5" />
          Join Slack (#cib-mango-tree)
        </a>
        <a
          href="https://www.civictechdc.org/donate"
          target="_blank"
          rel="noopener noreferrer"
          class="cta-btn inline-flex items-center gap-2 bg-white/10 text-white px-6 py-3 font-semibold border border-white/30"
        >
          <Heart class="w-5 h-5" />
          Donate
        </a>
      </div>
    </div>
  </section>

  <!-- Contact -->
  <section class="py-16 px-8 md:px-12 bg-background">
    <div class="max-w-5xl mx-auto text-center">
      <h3 class="font-bold text-2xl mb-6">Questions?</h3>
      <p class="text-muted mb-8">
        Reach out to us on Slack or email us directly
      </p>
      <a
        href="mailto:hello@cibmangotree.org"
        class="text-mango-green-dark font-semibold text-lg hover:underline"
      >
        hello@cibmangotree.org
      </a>
    </div>
  </section>

  <!-- <Newsletter /> -->
  <Footer />
</Layout>

<style>
  .animate-fade-in-up {
    animation: fadeInUp 0.6s ease-out forwards;
  }

  @keyframes fadeInUp {
    from {
      opacity: 0;
      transform: translateY(20px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .cta-btn {
    transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
  }

  .cta-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 16px rgba(0, 0, 0, 0.2);
  }

  .cta-btn:first-of-type:hover {
    background-color: #ffd966;
  }
</style>
