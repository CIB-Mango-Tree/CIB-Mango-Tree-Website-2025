---
interface Platform {
    name: string;
    icon: string;
    description: string;
    downloadLink: string;
    fileName: string;
    fileSize: string;
    requirements?: string;
}

interface Props {
    platforms: Platform[];
}

const { platforms } = Astro.props;
---

<div class="platform-downloads grid grid-cols-1 md:grid-cols-3 gap-6">
    {platforms.map((platform, index) => (
        <div 
            class="platform-card bg-white border-2 border-border-color p-6 md:p-8 flex flex-col items-center text-center"
            style={`animation-delay: ${index * 0.15}s;`}
        >
            <!-- OS Icon -->
            <div class="os-icon text-6xl md:text-7xl mb-4" set:html={platform.icon} />
            
            <!-- Platform Name -->
            <h3 class="font-display italic text-xl md:text-2xl text-text-primary mb-2">
                {platform.name}
            </h3>
            
            <!-- Description -->
            <p class="text-text-muted text-sm mb-4">
                {platform.description}
            </p>
            
            <!-- Requirements -->
            {platform.requirements && (
                <p class="text-text-light text-xs mb-4">
                    {platform.requirements}
                </p>
            )}
            
            <!-- Download Button -->
            <a 
                href={platform.downloadLink}
                class="download-btn mt-auto w-full flex items-center justify-center gap-2 bg-mango-yellow text-text-primary px-6 py-3 font-semibold"
            >
                <svg class="w-5 h-5 download-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4" />
                </svg>
                Download
            </a>
            
            <!-- File Name -->
            <span class="text-xs text-text-light mt-2">
                {platform.fileName}
            </span>

            <!-- File Size -->
            <span class="text-xs text-text-light mt-2">
                {platform.fileSize}
            </span>
        </div>
    ))}
</div>

<style>
    .platform-card {
        opacity: 0;
        animation: fadeInScale 0.5s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
        transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
    }

    @keyframes fadeInScale {
        from {
            opacity: 0;
            transform: scale(0.9) translateY(20px);
        }
        to {
            opacity: 1;
            transform: scale(1) translateY(0);
        }
    }

    .platform-card:hover {
        transform: translateY(-8px);
        box-shadow: 0 16px 40px rgba(90, 138, 74, 0.2);
        border-color: #5A8A4A;
    }

    .os-icon {
        transition: transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
    }

    .platform-card:hover .os-icon {
        transform: scale(1.15) rotate(-5deg);
    }

    .download-btn {
        position: relative;
        overflow: hidden;
        transition: all 0.3s ease;
    }

    .download-btn::before {
        content: '';
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
        transition: left 0.5s ease;
    }

    .download-btn:hover {
        background-color: #FFD966;
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(255, 224, 102, 0.4);
    }

    .download-btn:hover::before {
        left: 100%;
    }

    .download-icon {
        transition: transform 0.3s ease;
    }

    .download-btn:hover .download-icon {
        animation: bounceDown 0.6s ease infinite;
    }

    @keyframes bounceDown {
        0%, 100% { transform: translateY(0); }
        50% { transform: translateY(3px); }
    }
</style>
