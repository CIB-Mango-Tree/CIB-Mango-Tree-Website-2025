---
interface Step {
    name: string;
    icon: string;
}

const steps: Step[] = [
    { name: 'Community', icon: 'üë•' },
    { name: 'Contribution', icon: 'ü§ù' },
    { name: 'Engagement', icon: 'üí¨' },
    { name: 'Product', icon: 'üöÄ' },
    { name: 'Impact', icon: 'üéØ' }
];
---

<div class="pentagon-cycle-container py-8">
    <!-- Pentagon SVG Diagram -->
    <div class="pentagon-wrapper relative w-full max-w-md mx-auto aspect-square">
        <svg viewBox="0 0 400 400" class="w-full h-full">
            <!-- Pentagon path -->
            <path 
                d="M 200 50 L 350 150 L 310 320 L 90 320 L 50 150 Z" 
                fill="none" 
                stroke="#E5E2DC" 
                stroke-width="3"
                class="pentagon-outline"
            />
            
            <!-- Connecting arrows -->
            <defs>
                <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                    <polygon points="0 0, 10 3.5, 0 7" fill="#8BBF72" />
                </marker>
            </defs>
            
            <!-- Arrow paths between nodes -->
            <path d="M 215 65 Q 280 90 335 140" fill="none" stroke="#8BBF72" stroke-width="2" marker-end="url(#arrowhead)" class="arrow-path" style="animation-delay: 0.1s;" />
            <path d="M 345 165 Q 340 240 315 305" fill="none" stroke="#8BBF72" stroke-width="2" marker-end="url(#arrowhead)" class="arrow-path" style="animation-delay: 0.2s;" />
            <path d="M 295 325 Q 200 340 105 325" fill="none" stroke="#8BBF72" stroke-width="2" marker-end="url(#arrowhead)" class="arrow-path" style="animation-delay: 0.3s;" />
            <path d="M 85 305 Q 60 240 55 165" fill="none" stroke="#8BBF72" stroke-width="2" marker-end="url(#arrowhead)" class="arrow-path" style="animation-delay: 0.4s;" />
            <path d="M 65 140 Q 120 90 185 65" fill="none" stroke="#8BBF72" stroke-width="2" marker-end="url(#arrowhead)" class="arrow-path" style="animation-delay: 0.5s;" />
        </svg>

        <!-- Node circles positioned absolutely -->
        <div class="node-container absolute inset-0">
            {steps.map((step, index) => {
                const positions = [
                    { top: '5%', left: '50%', transform: 'translateX(-50%)' },
                    { top: '30%', right: '5%' },
                    { bottom: '12%', right: '15%' },
                    { bottom: '12%', left: '15%' },
                    { top: '30%', left: '5%' }
                ];
                return (
                    <div 
                        class="node absolute flex flex-col items-center"
                        style={`
                            ${positions[index].top ? `top: ${positions[index].top};` : ''}
                            ${positions[index].bottom ? `bottom: ${positions[index].bottom};` : ''}
                            ${positions[index].left ? `left: ${positions[index].left};` : ''}
                            ${positions[index].right ? `right: ${positions[index].right};` : ''}
                            ${positions[index].transform ? `transform: ${positions[index].transform};` : ''}
                            animation-delay: ${index * 0.15}s;
                        `}
                    >
                        <div class="node-circle w-16 h-16 md:w-20 md:h-20 bg-white border-4 border-mango-green-dark rounded-full flex items-center justify-center text-2xl md:text-3xl shadow-lg">
                            {step.icon}
                        </div>
                        <span class="node-label mt-2 text-sm md:text-base font-semibold text-text-primary text-center">
                            {step.name}
                        </span>
                    </div>
                );
            })}
        </div>
    </div>

    <!-- Legend -->
    <div class="mt-8 text-center">
        <p class="text-text-muted text-sm">
            Our continuous cycle of growth and impact
        </p>
    </div>
</div>

<style>
    .pentagon-outline {
        stroke-dasharray: 1000;
        stroke-dashoffset: 1000;
        animation: drawPentagon 2s ease-out forwards;
    }

    @keyframes drawPentagon {
        to {
            stroke-dashoffset: 0;
        }
    }

    .arrow-path {
        stroke-dasharray: 100;
        stroke-dashoffset: 100;
        animation: drawArrow 0.8s ease-out forwards;
    }

    @keyframes drawArrow {
        to {
            stroke-dashoffset: 0;
        }
    }

    .node {
        opacity: 0;
        animation: popIn 0.5s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
    }

    @keyframes popIn {
        from {
            opacity: 0;
            transform: scale(0.5);
        }
        to {
            opacity: 1;
            transform: scale(1);
        }
    }

    .node-circle {
        transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
    }

    .node:hover .node-circle {
        transform: scale(1.15);
        box-shadow: 0 8px 24px rgba(90, 138, 74, 0.3);
        border-color: #5A8A4A;
    }

    .node:hover .node-label {
        color: #5A8A4A;
    }

    .node-label {
        transition: color 0.2s ease;
    }
</style>
